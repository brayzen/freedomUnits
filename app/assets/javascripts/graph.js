// Generated by CoffeeScript 1.9.3
var Graph;

$(function() {
  return $('.get_kazoo').on('click', function() {
    var symbol;
    symbol = $('.text').val().toUpperCase();
    if (symbol.length < 1) {
      alert('enter a symbol silly');
      return false;
    }
    return $.get("/kazoo?symbol=" + symbol).success(function(data) {
      return window.graph.graph_days(data.days);
    });
  });
});

Graph = (function() {
  function Graph() {}

  Graph.prototype.graph_days = function(days) {
    var chart, closes, dataForGraph, options, smas;
    smas = days.smas;
    closes = days.closes;
    dataForGraph = [
      {
        data: smas,
        label: "sma",
        color: "#F0F",
        lines: {
          show: true
        },
        points: {
          show: false
        }
      }, {
        data: closes,
        label: "close",
        color: "#096",
        lines: {
          show: true
        },
        points: {
          show: false
        }
      }
    ];
    options = {
      legend: {
        position: "nw"
      }
    };
    return chart = $.plot($("#kazoo_graph"), dataForGraph, options);
  };

  return Graph;

})();

$(function() {
  return window.graph = new Graph();
});
